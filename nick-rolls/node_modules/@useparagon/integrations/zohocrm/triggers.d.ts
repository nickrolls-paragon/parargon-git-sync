import { ConditionalInput } from '@useparagon/core/steps/library/conditional';

/**
 * New Record intent type
 */
type ZohoCrmTriggerRecordCreated = {
  /**
   * Filter search
   * Only trigger on new records that match these filters.
   *
   */
  recordsFilterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
} & (
  | {
      /**
       * Record type
       *
       */
      recordType: '<specified by objectName property>';

      /**
       * Object Name
       * The API Name of the Object to create. Use Connect Portal Workflow Settings to allow users to select a Field Mapping.
       *
       * **Example**:
       * ```
       * {{settings.objectType}}
       * ```
       */
      objectName: string;
    }
  | {
      /**
       * Record type
       *
       */
      recordType: 'Accounts' | 'Contacts' | 'Leads' | 'Tasks';
    }
);

/**
 * Record Updated intent type
 */
type ZohoCrmTriggerRecordUpdated = {
  /**
   * Filter search
   * Only trigger on updated records that match these filters.
   *
   */
  recordsFilterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
} & (
  | {
      /**
       * Record type
       *
       */
      recordType: '<specified by objectName property>';

      /**
       * Object Name
       * The API Name of the Object to update. Use Connect Portal Workflow Settings to allow users to select a Field Mapping.
       *
       * **Example**:
       * ```
       * {{settings.objectType}}
       * ```
       */
      objectName: string;
    }
  | {
      /**
       * Record type
       *
       */
      recordType: 'Accounts' | 'Contacts' | 'Leads' | 'Tasks';
    }
);

export type IntentToInputOutput = {
  /**
   * ZOHO_CRM_TRIGGER_RECORD_CREATED
   */
  ZOHO_CRM_TRIGGER_RECORD_CREATED: [ZohoCrmTriggerRecordCreated, any];

  /**
   * ZOHO_CRM_TRIGGER_RECORD_UPDATED
   */
  ZOHO_CRM_TRIGGER_RECORD_UPDATED: [ZohoCrmTriggerRecordUpdated, any];
};
