import { ConditionalInput } from '@useparagon/core/steps/library/conditional';

/**
 * Record Created intent type
 */
type HubspotTriggerRecordCreated = {
  /**
   * Filter search
   * Only trigger on new records that match these filters.
   *
   * **Example**:
   * ```
   * field
   * ```
   */
  filterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
} & (
  | {
      /**
       * Record type
       *
       */
      recordType: '<specified by objectName property>';

      /**
       * Custom Object Name
       * The Name of the Custom Object to create. Use Connect Portal Workflow Settings to allow users to select a Custom Object Mapping.
       *
       * **Example**:
       * ```
       * {{settings.objectType}}
       * ```
       */
      objectName: string;
    }
  | {
      /**
       * Record type
       *
       */
      recordType: 'companies' | 'contacts' | 'deals';
    }
);

/**
 * Record Updated intent type
 */
type HubspotTriggerRecordUpdated = {
  /**
   * Filter search
   * Only trigger on new records that match these filters.
   *
   * **Example**:
   * ```
   * field
   * ```
   */
  filterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
} & (
  | {
      /**
       * Record type
       *
       */
      recordType: '<specified by objectName property>';

      /**
       * Custom Object Name
       * The Name of the Custom Object to create. Use Connect Portal Workflow Settings to allow users to select a Custom Object Mapping.
       *
       * **Example**:
       * ```
       * {{settings.objectType}}
       * ```
       */
      objectName: string;
    }
  | {
      /**
       * Record type
       *
       */
      recordType: 'companies' | 'contacts' | 'deals';
    }
);

/**
 * Record Deleted intent type
 */
type HubspotTriggerRecordDeleted = {
  /**
   * Filter search
   * Only trigger on new records that match these filters.
   *
   * **Example**:
   * ```
   * field
   * ```
   */
  filterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
} & (
  | {
      /**
       * Record type
       *
       */
      recordType: '<specified by objectName property>';

      /**
       * Custom Object Name
       * The Name of the Custom Object to create. Use Connect Portal Workflow Settings to allow users to select a Custom Object Mapping.
       *
       * **Example**:
       * ```
       * {{settings.objectType}}
       * ```
       */
      objectName: string;
    }
  | {
      /**
       * Record type
       *
       */
      recordType: 'companies' | 'contacts' | 'deals';
    }
);

/**
 * Record Deleted for Privacy (GDPR) intent type
 */
type HubspotTriggerRecordDeletedForPrivacy = {
  /**
   * Record type
   *
   */
  recordType: 'contact' | 'conversation';

  /**
   * Filter search
   * Only trigger on new records that match these filters.
   *
   * **Example**:
   * ```
   * field
   * ```
   */
  filterFormula?: ConditionalInput;

  /**
   * Apply field mapping
   *
   * **Example**:
   * ```
   * {{userSettings.MappingInput.objectMapping}}
   * ```
   */
  objectMapping?: string;
};

export type IntentToInputOutput = {
  /**
   * HUBSPOT_TRIGGER_RECORD_CREATED
   */
  HUBSPOT_TRIGGER_RECORD_CREATED: [HubspotTriggerRecordCreated, any];

  /**
   * HUBSPOT_TRIGGER_RECORD_UPDATED
   */
  HUBSPOT_TRIGGER_RECORD_UPDATED: [HubspotTriggerRecordUpdated, any];

  /**
   * HUBSPOT_TRIGGER_RECORD_DELETED
   */
  HUBSPOT_TRIGGER_RECORD_DELETED: [HubspotTriggerRecordDeleted, any];

  /**
   * HUBSPOT_TRIGGER_RECORD_DELETED_FOR_PRIVACY
   */
  HUBSPOT_TRIGGER_RECORD_DELETED_FOR_PRIVACY: [
    HubspotTriggerRecordDeletedForPrivacy,
    any,
  ];
};
