import { ActionStep, ActionTriggerStep } from '@useparagon/core';
import {
  CustomDropdownField,
  DynamicMappingField,
} from '@useparagon/core/inputs';
import { IntegrationOptions } from '@useparagon/core/integration';

import { IntentToInputOutput } from './intents';
import { IntentToInputOutput as TriggerIntentToInputOutput } from './triggers';

type ISalesloftIntegrationUserDefinedInput = {
  id: string;
  title: string;
  required?: boolean;
  tooltip?: string;
} & (
  | {
      type: 'text' | 'number' | 'email' | 'url' | 'boolean' | 'password';
    }
  | {
      type: 'custom_dropdown';
      key: string;
      customDropdownOptions?: CustomDropdownField[];
    }
  | {
      type: 'custom_field_mapping';
      objectName: string;
      // these object types values will be used in preview portal
      mockObjectTypes?: DynamicMappingField[];
      // these integration fields values will be used in preview portal
      mockIntegrationFields?: DynamicMappingField[];
    }
);

/**
 * map b/w input type to result
 */
export type InputResultMap = {
  email: string;
  url: string;
  password: string;
  boolean: boolean;
  text: string;
  number: number;
  custom_dropdown: string;
  custom_field_mapping: {
    object: string;
    fields: Record<string, any>;
  };
};

/**
 * pass { variableName for input => Input }
 * this should be used whenever we are creating inputs for integrations/workflows
 * as it will infer proper types
 */
export declare const createInputs: <
  T extends Record<string, ISalesloftIntegrationUserDefinedInput>,
>(
  inputs: T,
) => T;

/**
 * integration type for salesloft
 */
export type ISalesloftIntegration = {
  /**
   * name of integration
   */
  name: string;

  /**
   * action step methods
   */
  actions: {
    /**
     * Create an Account
     * method for SALESLOFT_CREATE_AN_ACCOUNT
     */
    createAnAccount: (
      inputs: IntentToInputOutput['SALESLOFT_CREATE_AN_ACCOUNT'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_CREATE_AN_ACCOUNT'][0],
      IntentToInputOutput['SALESLOFT_CREATE_AN_ACCOUNT'][1]
    >;

    /**
     * Update an Account
     * method for SALESLOFT_UPDATE_AN_ACCOUNT
     */
    updateAnAccount: (
      inputs: IntentToInputOutput['SALESLOFT_UPDATE_AN_ACCOUNT'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_UPDATE_AN_ACCOUNT'][0],
      IntentToInputOutput['SALESLOFT_UPDATE_AN_ACCOUNT'][1]
    >;

    /**
     * Get an Account
     * method for SALESLOFT_GET_AN_ACCOUNT
     */
    getAnAccount: (
      inputs: IntentToInputOutput['SALESLOFT_GET_AN_ACCOUNT'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_GET_AN_ACCOUNT'][0],
      IntentToInputOutput['SALESLOFT_GET_AN_ACCOUNT'][1]
    >;

    /**
     * Delete an Account
     * method for SALESLOFT_DELETE_AN_ACCOUNT
     */
    deleteAnAccount: (
      inputs: IntentToInputOutput['SALESLOFT_DELETE_AN_ACCOUNT'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_DELETE_AN_ACCOUNT'][0],
      IntentToInputOutput['SALESLOFT_DELETE_AN_ACCOUNT'][1]
    >;

    /**
     * Search Accounts
     * method for SALESLOFT_SEARCH_ACCOUNTS
     */
    searchAccounts: (
      inputs: IntentToInputOutput['SALESLOFT_SEARCH_ACCOUNTS'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_SEARCH_ACCOUNTS'][0],
      IntentToInputOutput['SALESLOFT_SEARCH_ACCOUNTS'][1]
    >;

    /**
     * Create a Custom Field
     * method for SALESLOFT_CREATE_A_CUSTOM_FIELD
     */
    createACustomField: (
      inputs: IntentToInputOutput['SALESLOFT_CREATE_A_CUSTOM_FIELD'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_CREATE_A_CUSTOM_FIELD'][0],
      IntentToInputOutput['SALESLOFT_CREATE_A_CUSTOM_FIELD'][1]
    >;

    /**
     * Update a Custom Field
     * method for SALESLOFT_UPDATE_A_CUSTOM_FIELD
     */
    updateACustomField: (
      inputs: IntentToInputOutput['SALESLOFT_UPDATE_A_CUSTOM_FIELD'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_UPDATE_A_CUSTOM_FIELD'][0],
      IntentToInputOutput['SALESLOFT_UPDATE_A_CUSTOM_FIELD'][1]
    >;

    /**
     * Get a Custom Field
     * method for SALESLOFT_GET_A_CUSTOM_FIELD
     */
    getACustomField: (
      inputs: IntentToInputOutput['SALESLOFT_GET_A_CUSTOM_FIELD'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_GET_A_CUSTOM_FIELD'][0],
      IntentToInputOutput['SALESLOFT_GET_A_CUSTOM_FIELD'][1]
    >;

    /**
     * Delete a Custom Field
     * method for SALESLOFT_DELETE_A_CUSTOM_FIELD
     */
    deleteACustomField: (
      inputs: IntentToInputOutput['SALESLOFT_DELETE_A_CUSTOM_FIELD'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_DELETE_A_CUSTOM_FIELD'][0],
      IntentToInputOutput['SALESLOFT_DELETE_A_CUSTOM_FIELD'][1]
    >;

    /**
     * Search Custom Fields
     * method for SALESLOFT_SEARCH_CUSTOM_FIELDS
     */
    searchCustomFields: (
      inputs: IntentToInputOutput['SALESLOFT_SEARCH_CUSTOM_FIELDS'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_SEARCH_CUSTOM_FIELDS'][0],
      IntentToInputOutput['SALESLOFT_SEARCH_CUSTOM_FIELDS'][1]
    >;

    /**
     * Create a Call
     * method for SALESLOFT_CREATE_A_CALL
     */
    createACall: (
      inputs: IntentToInputOutput['SALESLOFT_CREATE_A_CALL'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_CREATE_A_CALL'][0],
      IntentToInputOutput['SALESLOFT_CREATE_A_CALL'][1]
    >;

    /**
     * Get a Call
     * method for SALESLOFT_GET_A_CALL
     */
    getACall: (
      inputs: IntentToInputOutput['SALESLOFT_GET_A_CALL'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_GET_A_CALL'][0],
      IntentToInputOutput['SALESLOFT_GET_A_CALL'][1]
    >;

    /**
     * Search Calls
     * method for SALESLOFT_SEARCH_CALLS
     */
    searchCalls: (
      inputs: IntentToInputOutput['SALESLOFT_SEARCH_CALLS'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_SEARCH_CALLS'][0],
      IntentToInputOutput['SALESLOFT_SEARCH_CALLS'][1]
    >;

    /**
     * Create a Person
     * method for SALESLOFT_CREATE_A_PERSON
     */
    createAPerson: (
      inputs: IntentToInputOutput['SALESLOFT_CREATE_A_PERSON'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_CREATE_A_PERSON'][0],
      IntentToInputOutput['SALESLOFT_CREATE_A_PERSON'][1]
    >;

    /**
     * Update a Person
     * method for SALESLOFT_UPDATE_A_PERSON
     */
    updateAPerson: (
      inputs: IntentToInputOutput['SALESLOFT_UPDATE_A_PERSON'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_UPDATE_A_PERSON'][0],
      IntentToInputOutput['SALESLOFT_UPDATE_A_PERSON'][1]
    >;

    /**
     * Get a Person
     * method for SALESLOFT_GET_A_PERSON
     */
    getAPerson: (
      inputs: IntentToInputOutput['SALESLOFT_GET_A_PERSON'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_GET_A_PERSON'][0],
      IntentToInputOutput['SALESLOFT_GET_A_PERSON'][1]
    >;

    /**
     * Delete a Person
     * method for SALESLOFT_DELETE_A_PERSON
     */
    deleteAPerson: (
      inputs: IntentToInputOutput['SALESLOFT_DELETE_A_PERSON'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_DELETE_A_PERSON'][0],
      IntentToInputOutput['SALESLOFT_DELETE_A_PERSON'][1]
    >;

    /**
     * Search Persons
     * method for SALESLOFT_SEARCH_PERSONS
     */
    searchPersons: (
      inputs: IntentToInputOutput['SALESLOFT_SEARCH_PERSONS'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_SEARCH_PERSONS'][0],
      IntentToInputOutput['SALESLOFT_SEARCH_PERSONS'][1]
    >;

    /**
     * Create a Task
     * method for SALESLOFT_CREATE_A_TASK
     */
    createATask: (
      inputs: IntentToInputOutput['SALESLOFT_CREATE_A_TASK'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_CREATE_A_TASK'][0],
      IntentToInputOutput['SALESLOFT_CREATE_A_TASK'][1]
    >;

    /**
     * Update a Task
     * method for SALESLOFT_UPDATE_A_TASK
     */
    updateATask: (
      inputs: IntentToInputOutput['SALESLOFT_UPDATE_A_TASK'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_UPDATE_A_TASK'][0],
      IntentToInputOutput['SALESLOFT_UPDATE_A_TASK'][1]
    >;

    /**
     * Get a Task
     * method for SALESLOFT_GET_A_TASK
     */
    getATask: (
      inputs: IntentToInputOutput['SALESLOFT_GET_A_TASK'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_GET_A_TASK'][0],
      IntentToInputOutput['SALESLOFT_GET_A_TASK'][1]
    >;

    /**
     * Search Tasks
     * method for SALESLOFT_SEARCH_TASKS
     */
    searchTasks: (
      inputs: IntentToInputOutput['SALESLOFT_SEARCH_TASKS'][0],
      options: IntegrationOptions,
    ) => ActionStep<
      IntentToInputOutput['SALESLOFT_SEARCH_TASKS'][0],
      IntentToInputOutput['SALESLOFT_SEARCH_TASKS'][1]
    >;
  };

  /**
   * trigger step methods
   */
  triggers: {
    /**
     * New Person Created
     * method for SALESLOFT_TRIGGER_NEW_PERSON_CREATED
     */
    newPersonCreated: (
      inputs: TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_PERSON_CREATED'][0],
    ) => ActionTriggerStep<
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_PERSON_CREATED'][0],
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_PERSON_CREATED'][1]
    >;

    /**
     * Person Updated
     * method for SALESLOFT_TRIGGER_PERSON_UPDATED
     */
    personUpdated: (
      inputs: TriggerIntentToInputOutput['SALESLOFT_TRIGGER_PERSON_UPDATED'][0],
    ) => ActionTriggerStep<
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_PERSON_UPDATED'][0],
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_PERSON_UPDATED'][1]
    >;

    /**
     * New Account Created
     * method for SALESLOFT_TRIGGER_NEW_ACCOUNT_CREATED
     */
    newAccountCreated: (
      inputs: TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_ACCOUNT_CREATED'][0],
    ) => ActionTriggerStep<
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_ACCOUNT_CREATED'][0],
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_NEW_ACCOUNT_CREATED'][1]
    >;

    /**
     * Account Updated
     * method for SALESLOFT_TRIGGER_ACCOUNT_UPDATED
     */
    accountUpdated: (
      inputs: TriggerIntentToInputOutput['SALESLOFT_TRIGGER_ACCOUNT_UPDATED'][0],
    ) => ActionTriggerStep<
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_ACCOUNT_UPDATED'][0],
      TriggerIntentToInputOutput['SALESLOFT_TRIGGER_ACCOUNT_UPDATED'][1]
    >;
  };
};
